/bigdata-api
│
├── cmd/
│   ├── server/                       # Main API binary
│   │   └── main.go                   # Initialize Fiber + DB + routes
│   │
│   └── worker/                       # Background ingestion workers (future)
│       └── worker.go
│
├── internal/
│   ├── config/                       # Configuration / Environment
│   │   ├── config.go                 # Load .env vars
│   │   └── loader.go                 # Validate config values
│   │
│   ├── database/                     # DB Connections
│   │   ├── postgres.go               # Users, Credits, Logs, Usage, Feedback
│   │   ├── redis.go                  # Rate limiting, caching
│   │   └── clickhouse.go             # Analytics, records ingestion
│   │
│   ├── api/
│   │   ├── middlewares/
│   │   │   ├── auth.go               # User API key validator
│   │   │   ├── admin.go              # Admin / Sub-admin key validator
│   │   │   ├── ratelimit.go          # Redis limiter (query only)
│   │   │   ├── credits.go            # Deduct credits per request
│   │   │   ├── logging.go            # Save logs to PostgreSQL
│   │   │   └── cors.go               # Allow FE to connect
│   │   │
│   │   ├── controllers/
│   │   │   │
│   │   │   ├── auth/                 # Admin login / verify
│   │   │   │   └── verify_key.go
│   │   │   │
│   │   │   ├── users/                # Users module (Admin Panel)
│   │   │   │   ├── create.go
│   │   │   │   ├── list.go
│   │   │   │   ├── details.go
│   │   │   │   ├── delete.go
│   │   │   │   ├── regenerate.go
│   │   │   │   ├── update.go
│   │   │   │   └── change_role.go    # admin → sub-admin → user
│   │   │   │
│   │   │   ├── credits/
│   │   │   │   ├── add.go
│   │   │   │   ├── deduct.go
│   │   │   │   └── history.go        # credit_logs table
│   │   │   │
│   │   │   ├── feedback/
│   │   │   │   ├── create.go
│   │   │   │   ├── list.go
│   │   │   │   ├── reply.go
│   │   │   │   └── update_status.go
│   │   │   │
│   │   │   ├── logs/
│   │   │   │   ├── get_logs.go
│   │   │   │   └── get_user_logs.go
│   │   │   │
│   │   │   ├── stats/
│   │   │   │   ├── overview.go       # Total users, credits, API usage
│   │   │   │   └── daily_usage.go    # 30-day usage graph
│   │   │   │
│   │   │   ├── system/
│   │   │   │   ├── health.go         # CPU/RAM/DB
│   │   │   │   └── metrics.go        # Prometheus style metrics (future)
│   │   │   │
│   │   │   └── query/
│   │   │       └── query_handler.go  # User POST /query endpoint
│   │   │
│   │   └── routes/
│   │       ├── public.go             # /v1/health, /metrics, /verify-key
│   │       ├── user.go               # Needs API key (query, feedback)
│   │       └── admin.go              # Admin protected routes
│   │
│   ├── repository/                   # Database layer (SQL only)
│   │   ├── user_repo.go
│   │   ├── credit_repo.go
│   │   ├── feedback_repo.go
│   │   ├── usage_repo.go
│   │   ├── logs_repo.go
│   │   ├── stats_repo.go
│   │   ├── system_repo.go
│   │   └── record_repo.go            # ClickHouse SELECTs
│   │
│   ├── services/                     # Business Logic Layer
│   │   ├── credit_service.go
│   │   ├── feedback_service.go
│   │   ├── stats_service.go
│   │   ├── user_service.go
│   │   ├── record_service.go
│   │   ├── notification_service.go
│   │   └── email_service.go          # SMTP / SendGrid (optional)
│   │
│   ├── models/                       # All data structures
│   │   ├── user.go
│   │   ├── credit.go
│   │   ├── feedback.go
│   │   ├── logs.go
│   │   ├── usage.go
│   │   ├── record.go
│   │   └── system.go
│   │
│   ├── ingestion/                    # ClickHouse Pipeline
│   │   ├── reader.go                 # Read from API / CSV / queue
│   │   ├── normalize.go              # Clean + normalize fields
│   │   ├── dedupe.go                 # Generate dedupe key
│   │   └── loader.go                 # Insert into CH
│   │
│   ├── utils/
│   │   ├── hasher.go                 # Hash API keys
│   │   ├── logger.go                 # Request logs
│   │   ├── response.go               # JSON helpers
│   │   ├── pagination.go
│   │   ├── validator.go
│   │   └── random.go                 # random keys/usernames
│   │
│   └── workers/                      # Background async workers
│       └── clickhouse_worker.go      # ingestion queue processor (future)
│
├── migrations/                       # SQL migration files
│   ├── 001_users.sql
│   ├── 002_credits.sql
│   ├── 003_logs.sql
│   ├── 004_feedback.sql
│   ├── 005_daily_usage.sql
│   └── 006_normalized_records.sql
│
├── scripts/
│   ├── migrate.go                    # Run migrations
│   ├── ingest_csv.go                 # Batch import CSV → ClickHouse
│   └── dev_seed.go                   # Fake sample data
│
├── test/
│   ├── user_test.go
│   ├── credits_test.go
│   └── stats_test.go
│
├── Dockerfile
├── docker-compose.yml
├── go.mod
├── go.sum
└── README.md

❌ WHAT IS NOT BUILT YET (BUT INCLUDED IN STRUCTURE)

These features you want later:

Feature	Status
ClickHouse analytics dashboards	❌
Query heatmap	❌
Worker queue system	❌
Cron jobs (reset usage daily)	❌
SMTP email notifications	❌
Test Suite	❌
JWT login for Admin UI	❌